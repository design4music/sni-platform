Here’s how you can explain the concept to Claude Code — a **plain-language strategy memo** rather than a spec sheet.
It’s written so that he understands the architectural intent, scope, and the reasoning behind rebuilding Phases 2–3 while keeping the rest intact for now.

---

## Vision: New Gating and Clustering Based on Centroids

We want to **rebuild the middle of the pipeline** — Phases 2 and 3 — around a much clearer concept of **centroids** and **CTM units (centroid-track-month)**.
Phase 1 (title ingestion and cleaning) already works fine and stays.
Phases 4–6 will later adapt, but they can wait until we have the new gating/clustering layer solid.

---

### 1. Core idea

Instead of the current, generic “strategic / non-strategic” gating, every title should be **mechanically connected to a centroid** — a stable point of narrative gravity.

A **centroid** is the *topic or field of meaning* around which news items cluster:
for example *War in Ukraine*, *Israel–Palestine Conflict*, *Global Energy Geopolitics*, *Climate Change Impacts*.
Each centroid may have:

* a **primary theater** (a country or region where the tension originates), or
* be **global/systemic** with no single theater.

This centroid becomes the anchor for everything that follows — clustering, enrichment, and RAI analysis.

---

### 2. New gating logic (Phase 2)

We replace the current vocabulary-based “gate keep” with a **three-pass centroid matching** process.

**Pass 1 – Mechanical, theater-based**

* Use a very small, dead-simple taxonomy of *stable names* (countries, cities, persons, orgs, systems).
* Match titles directly to centroids with clear geography (Ukraine, Israel, Taiwan, etc.).
* This covers ~60–70 % of centroids with near-perfect precision.

**Pass 2 – Specialised global centroids**

* Handle global/systemic topics such as energy, tech, climate, refugees, pandemics.
* Use narrow, high-precision institutional anchors (UNFCCC, COP 30, WTO, TSMC, etc.).
* Same mechanical principle, just a different specialised term set.

**Pass 3 – Superpower buckets**

* Everything not caught by the first two passes but containing major-power markers
  (United States, China, EU, Russia) goes into corresponding **domestic/multi-vector centroids**.
* These act as broad “catch-all” theaters in a multipolar world.
* Later, we can refine them into domestic vs. global tracks, but for now they simply prevent unclassified overflow.

Anything still unmatched after pass 3 is **out of scope**.

---

### 3. New clustering concept (Phase 3)

We drop *event families* and replace them with **CTM items**.

```
CTM = (Centroid) × (Track) × (Month)
```

* **Centroid** – the narrative anchor (defined above).
* **Track** – a predefined strategic type: diplomacy, military, economic, tech, humanitarian, information, legal…
* **Month** – a calendar month; each CTM aggregates all titles that belong to that centroid and track within that month.

This gives us deterministic, lightweight, and comparable analytical units instead of fuzzy event clusters.

---

### 4. Implementation direction

* **Phase 1 stays as is.**
* **Phase 2–3 rebuilt:** new taxonomy structure, new centroid matching logic, CTM creation pipeline.
* We will **reuse existing infrastructure** where convenient (DB connection, title model, etc.) but likely need new tables:

  * `centroids` (metadata, primary_theater)
  * `taxonomy_terms_new` (all named entities linked to centroids)
  * `ctm` (the monthly bins)
  * `ctm_titles` (link table between CTM ↔ titles)

This might live in a **new folder tree** (`/src/pipeline_v2/` or similar) so the current pipeline keeps running while we experiment.
Claude can later decide if partial reuse of existing helpers (tokenizers, matchers) makes sense or if a clean rewrite is faster.

---

### 5. Immediate goals for Claude

1. **Design a new Phase 2–3 prototype** that performs:

   * mechanical centroid assignment using the new taxonomy;
   * creation/update of CTM records for `(centroid, track, month)` combinations.

2. **Advise on coexistence strategy:**

   * How to run the new pipeline alongside the existing one without breaking current ingestion or DB schema.
   * Whether to branch into a new set of modules/tables or version the existing ones.

3. **Output of the prototype:**

   * Each title should have: `centroid_id`, `track_id`, `month`, and an indicator if it’s gated in or out.
   * Each CTM should aggregate its titles and basic counts (no enrichment yet).

Once this works reliably, we can adapt Phases 4–6 (enrichment, summarization, RAI).

---

### 6. Philosophy

This redesign isn’t just a code change; it’s a conceptual shift:

* **From**: “find strategic titles via a giant vocabulary.”
* **To**: “map every title to its center of meaning — a centroid — then analyze structured flows (CTMs).”
